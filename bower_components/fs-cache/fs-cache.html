<link rel="import" href="../polymer/polymer.html">
<script src="../localforage/dist/localforage.nopromises.min.js"></script>
<script src="../localforage-sessionstoragewrapper/src/localforage-sessionstoragewrapper.js"></script>
<script src="./fs-cache.js"></script>

<!--
# fs-cache

This element creates a cache instance of localforage and exposes that cache through the `cache` attribute. Docs for `FS.cache` are [here](https://github.com/fs-webdev/fs-cache/blob/master/README.md)

### Import
#### Import fs-cache

    <link rel="import" href="../fs-cache.html">

#### To store encrypted values

    <link rel="import" href="../fs-crypto.html">
    <link rel="import" href="../fs-cache.html">

### Basic Example

    <fs-cache store-name="demo" cache="{{demoCache}}"></fs-cache>

### Session Storage

    <fs-cache store-name="demo" type="session" lifetime="day" cache="{{sessionDemoCache}}"></fs-cache>

### Local Storage

    <fs-cache store-name="demo" type="local" lifetime="60000" cache="{{localDemoCache}}"></fs-cache>


@demo demo/index.html
-->

<dom-module id="fs-cache">

  <script>
    Polymer({
      is: 'fs-cache',
      properties: {
        /**
         * Defines the second level namespace. Always set this!
         * @type {String}
         * @default fs
         */
        storeName: {
          type: String
        },
        /**
         * Defines the top level namespace. Probably should never set this.
         * @type {String}
         * @default helpee's cisId || cisId || 'fs'
         */
        dbName: {
          type: String
        },
        /**
         * Defines the storage type. Can be 'session' or 'local'.
         * @type {String}
         * @default indexedDB
         */
        type: {
          type: String
        },
        /**
         * Defines the lifetime of the cache. Can be 'hour', 'day', 'week', or a number in milliseconds '60000'.
         * @type {String}
           @default twoWeeks
         */
        lifetime: {
          type: String
        },
        /**
         * Defines the size of the cache. defaults to 4500000
         * @type {Number}
           @default 4500000
         */
        size: {
          type: Number
        },
        /**
         * Exposes the created cache instance.
         * @type {Object}
         */
        cache: {
          type: Object,
          notify: true
        },
        /**
         * Always use user's cisId instead of helpee's cisId when available.
         * @type {Object}
         * @default false
         */
        ignoreHelper: {
          type: Boolean
        }
      },
      ready: function(){
        var config = {
          ignoreHelper: this.ignoreHelper,
          storeName: this.storeName,
          type: this.type,
          size: this.size,
          dbName: this.dbName,
          lifetime: this.lifetime
        };
        this.cache = FS.cache.instance(config);
      }
    });
  </script>
</dom-module>
